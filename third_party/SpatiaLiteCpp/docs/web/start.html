
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SpatiaLiteC++ | Getting Started</title>

    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="./css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./css/spatialitec++.css" rel="stylesheet">
    <link href="./css/github.css" rel="stylesheet">
    <script src="./js/highlight.pack.js" type="text/javascript"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="./js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="./js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href=".">Home</a></li>
            <li><a href="start.html">Getting Started</a></li>
            <li><a href="demos.html">Demos</a></li>
            <li><a href="../api/">Docs</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right spatialitecpp-github-logo">
            <li><a href="https://github.com/dpmcmlxxvi/SpatiaLiteCpp">
            <img src="./img/GitHub-Mark-Light-32px.png">
            </a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container" style="min-width: 750px;">
      <h1>Getting Started</h1>
      <div class="row">
        <div class="col-md-12">
          <h2>Usage</h2>
          <p>
            Using the SpatiaLiteC++ library is as simple as linking into the
            static or shared version of the library and including the main
            header file
          </p>
          <pre><code>#include "SpatiaLiteCpp/SpatiaLiteCpp.h"</code></pre>
          <p>
            If the Windows shared library is being used then the DLL import spec
            macro must be defined before the header is included.
          </p>
          <pre><code>#define SPATIALITECPP_IMPORT
#include "SpatiaLiteCpp/SpatiaLiteCpp.h"</code></pre>
          <p>
            The SpatiaLiteC++ code is contained in the <code>SpatiaLite</code>
            namespace.
          </p>
          <pre><code>SpatiaLite::SpatialDatabase database("foo.sqlite");</code></pre>
          <p>
            The compile time external requirements are the SpatiaLite, SQLite,
            SQLiteC++, and smart pointer header files. Optionally, if the
            <code>shared_ptr</code> smart pointer is used then its header file
            must be included. The runtime external requirements are the
            SpatiaLite and SQLite libraries. The easiest way to satisfy these
            requirements are via OSGeo4W on Windows and OSGeo Live on Linux.
            Alternatively, they can be built from source using their
            documentation.
          </p>
        </div>
      </div>
      <h2>Building from source</h2>
      <div class="row">
        <div class="col-md-12">
          <h3>Requirements</h3>
          <p>
            The external requirements to SpatiaLiteC++ are listed in the
            following table. SpatiaLite is assumed to be installed and linked to
            as an external dependency. SQLiteC++ and shared_ptr are provided as
            submodules. The table also provides the version numbers against
            which the library has been tested. The shared_ptr library is not
            required but if not used then another smart pointer library must be
            used to perform the memory cleanup.
          </p>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Library</th>
                <th>Description</th>
                <th>Version</th>
                <th>Required</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <a href="http://www.gaia-gis.it/gaia-sins/">SpatiaLite</a>
                </td>
                <td>Spatial extension of SQLite</td>
                <td>4.3.0</td>
                <td>Yes</td>
                <td>External</td>
              </tr>
              <tr>
                <td>
                  <a href="https://www.sqlite.org/">SQLite</a>
                </td>
                <td>A self-contained, serverless SQL database engine</td>
                <td>3.17.0</td>
                <td>Yes</td>
                <td>External</td>
              </tr>
              <tr>
                <td>
                  <a href="https://github.com/SRombauts/SQLiteCpp">SQLiteC++</a>
                </td>
                <td>C++ SQLite wrapper</td>
                <td>1.2.0</td>
                <td>Yes</td>
                <td>Submodule</td>
              </tr>
              <tr>
                <td>
                  <a href="https://github.com/SRombauts/shared_ptr">
                    shared_ptr
                  </a>
                </td>
                <td>shared_ptr implementation</td>
                <td>1.0.0</td>
                <td>No</td>
                <td>Submodule</td>
              </tr>
            <tbody>
          </table>
          <p>
            Additionally, the following development requirements are needed to
            build the projects, run the unit tests, and generate a coverage
            report.
          </p>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Library</th>
                <th>Description</th>
                <th>Version</th>
                <th>Required</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <a href="https://cmake.org/">CMake</a>
                </td>
                <td>Build automation tool</td>
                <td>2.8.12</td>
                <td>Yes</td>
                <td>External</td>
              </tr>
              <tr>
                <td>
                  <a href="https://opencppcoverage.codeplex.com/">
                    OpenCppCoverage
                  </a>
                </td>
                <td>Code coverage for Windows</td>
                <td>0.9.5.3</td>
                <td>No</td>
                <td>External</td>
              </tr>
              <tr>
                <td>
                  <a href="http://ltp.sourceforge.net/coverage/lcov.php">
                    lcov/genhtml
                  </a>
                </td>
                <td>Code coverage for Linux</td>
                <td>1.10</td>
                <td>No</td>
                <td>External</td>
              </tr>
            <tbody>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Installation</h3>
            <p>Clone the repository</p>
            <pre class="fragment">
    git clone https://github.com/dpmcmlxxvi/SpatiaLiteCpp.git</pre>
            <p>
              The submodule dependencies SQLiteC++ and shared_ptr need to be
              initialized and updated.
            </p>
            <pre class="fragment">
    cd SpatiaLiteCpp
    git submodule init
    git submodule update</pre>
            <div class="alert alert-warning">
              The external dependency
              <a class="el" href="namespace_spatia_lite.html">SpatiaLite</a> is
              assumed to be installed via OSGeo4W on Windows or OSGeo Live on
              Linux in their default installation locations. If SpatiaLite is
              installed in a different location then instructions for linking to
              a custom build are provided below.
            </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Build</h3>
          <p>
            The quickest way to get the library built is to run one of the two
            build scripts without any arguments. On Windows run the batch script
          </p>
          <pre class="fragment">
    &gt; build.bat</pre>
          <p>
            and on Linux run the bash script
          </p>
          <pre class="fragment">
    $ ./build.sh</pre>
          <p>
            The default settings build just the SpatiaLiteC++ library as a
            release static library without building the examples project. The
            build scripts invoke <code>cmake</code> to generate the project
            files and then <code>cmake --build</code> to build and install the
            project. The scripts have the following options:
          </p>
          <pre class="fragment">
    build [-h] [-a] [-b] [-c &lt;string&gt;] [-d] [-e] [-g &lt;cmake generator&gt;] [-m &lt;Release|Debug&gt;] [-o &lt;directory&gt;] [-t] [-x]
        -h = Display this usage
        -a = Build API documentation
        -b = Build release distributions
        -c = Additional CMake arguments. Get concatenated and passed to CMake.
        -d = Build dynamic library otherwise static
        -e = Build examples project
        -g = Build generator (Default: "Visual Studio 14 2015" or "Unix Makefiles")"
        -m = Build mode (Default: Release)
        -o = Build directory (Default: "build/windows" or "build/linux")
        -t = Build test project (will build examples and Debug mode)
        -x = Build test coverage (will build tests)</pre>
          <p>
            CMake build files are provided for both the SpatiaLiteC++ library
            and an example executable that links against it. The library can be
            linked into the example executable as either a static or dynamic
            library.
          </p>
          <h4>Testing</h4>
          <p>
            The build process can also build and run the unit tests which are
            defined using the Google Test framework. The unit tests are built by
            including the <code>-t</code> flag. This will build the project in
            Debug mode, generate the examples project, and run the tests using
            <code>ctest</code>. SpatiaLiteC++ has been tested under the
            following environments.
          </p>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>OSGeo</th>
                <th>Operating System</th>
                <th>Compiler</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                    <a href="https://osgeo4w.osgeo.org">OSGeo4W</a>
                </td>
                <td>
                    Windows 7
                </td>
                <td>Visual Studio 14 2015</td>
              </tr>
              <tr>
                <td>
                    <a href="http://live.osgeo.org">OSGeo Live 9.0</a>
                </td>
                <td>
                    Lubuntu 14.04
                </td>
                <td>gcc 4.8.4</td>
              </tr>
            <tbody>
          </table>
          <div class="alert alert-warning">
            If building the unit-tests then the SpatiaLite runtime libraries
            must be in the path. This can resolved on Windows by running the
            build script from the OSGeo4W shell and on Linux the OSGeo Live
            virtual machine comes pre-configured.
          </div>
          <h4>Coverage</h4>
          <p>
            The build process can also generate a coverage report of the unit
            tests which uses <code>OpenCppCoverage</code> on Windows and
            <code>lcov</code>/<code>genhtml</code> on Linux. The coverage report
            is built by including the <code>-x</code> flag. This will build the
            unit test project, run it, and generate the report.
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Dependencies</h3>
          <p>
            SpatiaLite and SQLite are assumed to be installed via OSGeo4W on
            Windows and OSGeo Live on Linux. Alternate installation paths for
            the include and lib directories can be used by changing the
            following additional CMake custom variables from their default
            values.
          </p>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Variable</th>
                <th>OSGeo4W</th>
                <th>OSGeo Live</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><b>spatialite_dir_inc</b></td>
                <td>C:\OSGeo4W64\include</td>
                <td>/usr/include</td>
              </tr>
              <tr>
                <td><b>spatialite_dir_lib</b></td>
                <td>C:\OSGeo4W64\lib</td>
                <td>/usr/lib/x86_64-linux-gnu</td>
              </tr>
            </tbody>
          </table>
          <p>
            For example, to change the include directory for the header files
            the following build command could be used on Linux
          </p>
          <pre class="fragment">
    ./build.sh -c "-Dspatialite_dir_inc=/foo/spatialite/include"</pre>
          <p>or similarly on Windows</p>
          <pre class="fragment">
    ./build.bat -c "-Dspatialite_dir_inc=C:/foo/spatialite/include"</pre>
          <p>
            Multiple "-c" arguments can be passed and they will be concatenated
            and passed to CMake.
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Smart Pointer</h3>
          <p>
            The default configuration uses the shared pointer implementation by
            the <a href="https://github.com/SRombauts/shared_ptr">
            SRombauts/shared_ptr</a> open source project which provides a
            minimal shared_ptr implementation to handle cases where boost or
            std::shared_ptr are not available. However, if another smart pointer
            library is being used then this can be configured at compile-time
            by defining two preprocessor macros in an application before
            including the main SpatiaLiteC++ header:
          </p>
          <ul>
            <li>
              <b>SPATIALITECPP_PTRTYPE</b>
              <ul>
                <li>Determines which pointer type to use</li>
              </ul>
            </li>
            <li>
              <b>SPATIALITECPP_PTR</b>
              <ul>
                <li>
                  Defines the smart pointer that wraps the SpatiaLiteC++ RAII
                  classes.
                </li>
              </ul>
            </li>
          </ul>
          <p>The default values for <b>SPATIALITECPP_PTRTYPE</b> are</p>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th style="text-align: center;"><b>Value</b></th>
                <th>Pointer</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="text-align: center;">0</td>
                <td>x*</td>
                <td>Raw pointer</td>
              </tr>
              <tr>
                <td style="text-align: center;">1</td>
                <td>shared_ptr&lt;x&gt;</td>
                <td>SRombauts shared_ptr</td>
              </tr>
              <tr>
                <td style="text-align: center;">2</td>
                <td>std::tr1::shared_ptr&lt;x&gt;</td>
                <td>TR1 shared pointer</td>
              </tr>
              <tr>
                <td style="text-align: center;">3</td>
                <td>std::shared_ptr&lt;x&gt;</td>
                <td>C++11 shared pointer</td>
              </tr>
              <tr>
                <td style="text-align: center;">4</td>
                <td>boost::shared_ptr&lt;x&gt;</td>
                <td>Boost shared_ptr</td>
              </tr>
            </tbody>
          </table>
          <p>
            The pointer macro <b>SPATIALITECPP_PTR</b> only needs to be defined
            if <b>SPATIALITECPP_PTRTYPE</b> is set to 0 which uses a raw pointer.
            In which case <b>SPATIALITECPP_PTR</b> must be defined otherwise any
            allocated memory will not be deallocated. For example,
          </p>
          <pre class="fragment">
    #define SPATIALITECPP_PTRTYPE 0
    #define SPATIALITECPP_PTR(x) foo::shared_ptr&lt;x&gt;
    #include "SpatiaLiteCpp/SpatiaLiteCpp.h"</pre>
        </div>
      </div>
      <hr>
    </div>

    <div class="container">
      <footer>
        <p>&copy; 2016 Daniel Pulido &lt;dpmcmlxxvi@gmail.com&gt;</p>
      </footer>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./js/ie10-viewport-bug-workaround.js"></script>

  </body>
</html>
